=======================================
Using bilby_pipe for an injection study
=======================================

:code:`bilby_pipe` provides a set of tools for creating and analysing an
injection set. On this page, we'll document the behaviour of this feature.

Here is an example of an ini file for an injection. The injections are generated
by drawing :code:`n-injection` samples from the prior.

.. literalinclude:: ../example_ini_files/bbh_injection.ini

The prior is specified by a bilby prior file :code:`bbh_reduced.prir`:

.. literalinclude:: ../example_ini_files/bbh_reduced.prior


Running :code:`bilby_pipe` with this ini file

.. code-block:: console

   $ bilby_pipe bbh_injection.ini

Will produce the usual directory structure, along with the injection file. Here
is the injection directory structure (not showing the various submit files)

.. code-block:: console

   bbh_injection.ini
     -> bbh_simulations_injection_file.h5
     -> submit/
     -> logs/

Submitting the jobs, data will be created for each injection (labelled by the
process-number) and similarly outputs will be labelled by the process number.

